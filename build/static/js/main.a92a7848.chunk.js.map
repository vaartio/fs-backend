{"version":3,"sources":["components/Filter.js","components/AddPersonForm.js","components/Person.js","components/Persons.js","services/PersonService.js","components/Notification.js","components/App.js","index.js"],"names":["Filter","props","value","onChange","AddPersonForm","onSubmit","nameValue","nameOnChange","numberValue","numberOnChange","type","Person","data","name","number","onClick","Persons","items","map","item","index","key","onItemClick","baseUrl","getAll","axios","get","then","response","newObject","entries","id","reduce","prev","cur","getBiggestId","newObj","post","put","delete","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","searchResults","setSearchResults","setMessage","useEffect","console","log","personService","results","setNotification","setTimeout","event","target","filter","toLowerCase","includes","preventDefault","find","window","confirm","result","alert","storedPersonObject","updatedPersons","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a92a7848.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n  return (\n    <div>\n        filter shown with: <input value={props.value} onChange={props.onChange} />\n    </div>\n  )\n}\n  \nexport default Filter\n","import React from 'react'\n\nconst AddPersonForm = (props) => {\n    return (\n      <form onSubmit={props.onSubmit}>\n        <div>\n          name: <input value={props.nameValue} onChange={props.nameOnChange} />\n        </div>\n        <div>\n          number: <input value={props.numberValue} onChange={props.numberOnChange} />\n        </div>\n        <button type=\"submit\">add</button>\n      </form>\n    )\n}\n\nexport default AddPersonForm\n","import React from 'react'\n\nconst Person = (props) => {\n  return (\n    <li>{props.data.name} {props.data.number} <button onClick={props.onClick}>delete</button></li>\n  )\n}\n\nexport default Person\n","import React from 'react'\n\nimport Person from './Person'\n\nconst Persons = (props) => {\n    return (\n        <ul>\n            {props.items.map((item, index) =>\n                <Person key={index} data={item} onClick={props.onItemClick(item)} />\n            )}\n        </ul>\n    )\n}\n\nexport default Persons\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getBiggestId = entries => {\n    return entries.reduce((prev, cur) => !prev ||Â cur.id > prev.id ? cur.id : prev.id)\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = getAll()\n    .then(entries => {\n        newObject.id = getBiggestId(entries) + 1\n        return newObject\n    })\n    .then(newObj => axios.post(baseUrl, newObj))\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }\n","import React from 'react'\n\nconst getStyle = type => {\n    if (type === 'error') {\n        return {\n            color: 'red',\n            background: 'lightgrey',\n            fontSize: 20,\n            borderStyle: 'solid',\n            borderRadius: 5,\n            padding: 10,\n            marginBottom: 10,\n        }\n    }\n    else {\n        return {\n            color: 'green',\n            background: 'lightgrey',\n            fontSize: 20,\n            borderStyle: 'solid',\n            borderRadius: 5,\n            padding: 10,\n            marginBottom: 10,\n        }\n    }\n}\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n        return null\n    }\n\n    const style = getStyle(message.type)\n\n    return (\n        <div style={style}>\n        {message.message}\n        </div>\n    )\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\nimport Filter from './Filter'\nimport AddPersonForm from './AddPersonForm'\nimport Persons from './Persons'\nimport personService from '../services/PersonService'\nimport Notification from './Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n\n  const [ search, setSearch ] = useState('')\n  const [ searchResults, setSearchResults ] = useState(persons)\n\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService.getAll()\n      .then(results => {\n        console.log('promise fulfilled')\n        setPersons(results)\n        setSearchResults(results)\n      })\n  }, [])\n\n  const handleNewNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    console.log(event.target.value)\n    setSearch(event.target.value)\n    setSearchResults(persons.filter(item => item.name.toLowerCase().includes(event.target.value.toLowerCase())))\n  }\n\n  const setNotification = (message, type = 'info') => {\n    setMessage({\n      message: message,\n      type: type,\n    })\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    let item = persons.find(item => item.name === newName)\n    if (!!item) {\n      if (item.number !== newNumber) {\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n          personService.update(item.id, { ...item, number: newNumber })\n            .then((result) => {\n              setNotification(`Updated ${result.name}`)\n              personService.getAll()\n                .then(results => {\n                  setPersons(results)\n                  setSearchResults(results)\n                })\n            })\n        }\n      }\n      else {\n        alert(`${newName} is already added to phonebook`)\n      }\n      return\n    }\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    personService.create(personObject)\n      .then(storedPersonObject => {\n        setNotification(`Created ${storedPersonObject.name}`)\n        const updatedPersons = persons.concat(storedPersonObject);\n        setPersons(updatedPersons)\n        setNewName('')\n        setNewNumber('')\n        setSearch('')\n        setSearchResults(updatedPersons)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setNotification(error.response.data.error, 'error')\n      })\n  }\n\n  const onItemClick = (item) => {\n    return () => {\n      if (window.confirm(`Delete ${item.name}?`)) {\n        personService.remove(item.id)\n          .then(() => {\n            setNotification(`Deleted ${item.name}`)\n            personService.getAll()\n              .then(results => {\n                setPersons(results)\n                setSearchResults(results)\n              })\n          })\n          .catch(error => {\n            setNotification(`Information of ${item.name} has already been removed from server`, 'error')\n          })\n      }\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter key=\"search\" value={search} onChange={handleSearchChange} />\n      <h3>add a new</h3>\n      <AddPersonForm\n        onSubmit={addPerson}\n        nameValue={newName} nameOnChange={handleNewNameChange}\n        numberValue={newNumber} numberOnChange={handleNewNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons key=\"results\" items={searchResults} onItemClick={onItemClick} />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}